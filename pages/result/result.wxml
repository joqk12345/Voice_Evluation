<!--pages/result/result.wxml-->
<view class="result-container">
  <!-- æ€»ä½“è¯„åˆ† -->
  <view class="score-section card">
    <view class="score-header">
      <text class="score-title">è¯„æµ‹ç»“æœ</text>
      <text class="score-date">{{currentDate}}</text>
    </view>
    
    <view class="overall-score">
      <view class="score-circle">
        <text class="score-number">{{resultData.score}}</text>
        <text class="score-label">ç»¼åˆè¯„åˆ†</text>
      </view>
      <view class="score-level">
        <text class="level-text">{{scoreLevel.level}}</text>
        <text class="level-desc">{{getLevelDescription(resultData.score)}}</text>
      </view>
    </view>
  </view>

  <!-- è¯¦ç»†æŒ‡æ ‡ -->
  <view class="metrics-section card">
    <view class="section-header">
      <text class="section-title">è¯¦ç»†åˆ†æ</text>
    </view>
    
    <view class="metrics-list">
      <view class="metric-item" wx:for="{{metricsList}}" wx:key="index">
        <view class="metric-header">
          <view class="metric-icon">{{item.icon}}</view>
          <view class="metric-info">
            <text class="metric-name">{{item.name}}</text>
            <text class="metric-desc">{{item.description}}</text>
          </view>
          <view class="metric-score">
            <text class="score-value">{{item.score}}</text>
            <text class="score-unit">åˆ†</text>
          </view>
        </view>
        
        <view class="metric-progress">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{item.score}}%; background: {{item.color}};"></view>
          </view>
        </view>
        
        <view class="metric-advice">
          <text class="advice-text">{{item.advice}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ”¹è¿›å»ºè®® -->
  <view class="advice-section card">
    <view class="section-header">
      <text class="section-title">æ”¹è¿›å»ºè®®</text>
    </view>
    
    <view class="advice-list">
      <view class="advice-item" wx:for="{{adviceList}}" wx:key="index">
        <view class="advice-icon">ğŸ’¡</view>
        <text class="advice-content">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- å†å²å¯¹æ¯” -->
  <view class="comparison-section card" wx:if="{{hasHistory}}">
    <view class="section-header">
      <text class="section-title">å†å²å¯¹æ¯”</text>
    </view>
    
    <view class="comparison-chart">
      <view class="chart-item" wx:for="{{comparisonData}}" wx:key="index">
        <text class="chart-label">{{item.label}}</text>
        <view class="chart-bar">
          <view class="bar-fill" style="width: {{item.current}}%; background: var(--primary-color);"></view>
          <view class="bar-fill previous" style="width: {{item.previous}}%; background: var(--text-light);"></view>
        </view>
        <text class="chart-value">{{item.current}}</text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-section">
    <button class="btn btn-outline" bindtap="playRecord">
      <text class="btn-icon">â–¶ï¸</text>
      <text>æ’­æ”¾å½•éŸ³</text>
    </button>
    
    <button class="btn btn-primary" bindtap="viewRecommend">
      <text class="btn-icon">ğŸµ</text>
      <text>æŸ¥çœ‹æ¨è</text>
    </button>
    
    <view class="action-control" bindtap="shareResult">
      <view class="control-dots">â‹¯</view>
      <view class="control-record">â—</view>
    </view>
  </view>
</view>
